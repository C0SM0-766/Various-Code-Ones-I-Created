e = campaignTrail_temp;

            nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#eda137";

            nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#ffffff";

            document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

            $("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

            $(".container")[0].style.backgroundColor = "#1644a8";

$("#game_window")[0].style.backgroundImage = "url(https://files.catbox.moe/5byr11.png)"

$("#game_window")[0].style.borderColor = "#2960d6"

$(".container")[0].style.border = ".2em solid #2960d6"
            document.getElementById("header").src = "https://static01.nyt.com/images/2019/05/29/realestate/00skyline-south4/88ce0191bfc249b6aae1b472158cccc4-superJumbo.jpg";

            document.body.background = "https://files.catbox.moe/72ufgs.jpg";

            e.election_json = [{"model":"campaign_trail.election","pk":20,"fields":{"year":2016,"summary":"<p>In the wake of the COVID-19 pandemic, New York City stands resilient as ever.<br><br>Two-term Mayor Bill de Blasio is on the way out, forced out of office by the city's term limits, and Democrats have a wide slate of candidates in line, seeking to replace him.<br><br>With the Democratic primary the <i>de facto</i> general election in the heavily Democratic city, New York Democrats have a decision to make. Moderation or Progressivism? And even after that decision is made, who will be the one to carry the torch for that cause?","image_url":"https://nypost.com/wp-content/uploads/sites/2/2021/01/becountednyc-fb-1a.jpg?resize=1024,682&quality=75&strip=all","winning_electoral_vote_number":1,"advisor_url":"https://media.npr.org/assets/img/2021/06/30/gettyimages-1324957731_custom-f2cdcb2b531270bfa500820d71d8aa873aa360d1.jpg?s=900&c=85&f=webp","recommended_reading":"<ul>\n<li><a href=https://www.chicagotribune.com/opinion/editorials/ct-edit-chicago-tribune-biden-endorsement-20200925-lnyxsb5qvrftnjjmj3rnzj33jy-story.html>Our Case For Joe Biden</a></li>\n<li><a href=https://nationalinterest.org/feature/case-trump-166808>The Case For Trump</a></li>\n<li><a href=https://www.npr.org/2020/11/18/935730100/how-biden-won-ramping-up-the-base-and-expanding-margins-in-the-suburbs>How Biden Won: Ramping Up The Base And Expanding Margins In The Suburbs</a></li>\n<li><a href=https://www.prospectmagazine.co.uk/politics/donald-trump-joe-biden-us-election-almost-win-votes-concede>Why Did Trump Almost Win?</a></li>\n<li><a href=https://www.hoover.org/research/no-evidence-voter-fraud-guide-statistical-claims-about-2020-election>No Evidence For Voter Fraud: A Guide To Statistical Claims About The 2020 Election</a></li>\n</ul>","has_visits":1,"no_electoral_majority_image":"https://www.gothamgazette.com/images/graphics/2020/inauguration-mayor.jpg"}}];e.temp_election_list = [{"id":20,"year":2016,"is_premium":0,"display_year":"2021 NYC Democratic Primary"}];e.credits = "C0SM0";e.global_parameter_json = [{"model":"campaign_trail.global_parameter","pk":1,"fields":{"vote_variable":1.125,"max_swing":0.12,"start_point":0.94,"candidate_issue_weight":10,"running_mate_issue_weight":3,"issue_stance_1_max":-0.71,"issue_stance_2_max":-0.3,"issue_stance_3_max":-0.125,"issue_stance_4_max":0.125,"issue_stance_5_max":0.3,"issue_stance_6_max":0.71,"global_variance":0.01,"state_variance":0.005,"question_count":25,"default_map_color_hex":"#C9C9C9","no_state_map_color_hex":"#999999"}}];e.candidate_json = [{"model":"campaign_trail.candidate","pk":1001,"fields":{"first_name":"Eric","last_name":"Adams Campaign","election":20,"party":"Democratic","state":"Citywide","priority":1,"description":"<p><i>\"All my haters become my waiters when I sit down at the table of success. Turn your haters into your waiters and give them a 15 percent tip.\"</i><br><br>As a cop, Eric Adams learned about the issues plaguing many of our citizens. He runs during a deadly pandemic, claiming the lives of many New Yorkers. He's seen the economy take a tumble. He's seen many citizens struggle to make ends meet.<br><br>He hopes to quash all of them. But first, he must win the Democratic nomination. After that, it'll be a cakewalk for him to become mayor.","color_hex":"#2c5ec9","secondary_color_hex":null,"is_active":1,"image_url":"https://files.catbox.moe/zcoxkm.jpg","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":null,"candidate_score":1,"running_mate":false,"scrollable":false}},{"model":"campaign_trail.candidate","pk":1002,"fields":{"first_name":"Kathryn","last_name":"Garcia Campaign","election":20,"party":"Democratic","state":"Citywide","priority":1,"description":"<p><i>\"New Yorkers deserve- and can have- nice things. We've been sold a bill of goods on Penn so many times we've lost faith anything meaningful will ever happen.\"</i><br><br>Kathryn Garcia has ensured that most New Yorkers can live. She provided food and water after two disastrous events: Hurricane Sandy & COVID-19.<br><br>Now, she hopes to reach even higher. With many accomplishments to her name, there's no way she <i>shouldn't</i> lose this race.","color_hex":"#c23030","secondary_color_hex":null,"is_active":1,"image_url":"https://files.catbox.moe/luh9di.jpg","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":null,"candidate_score":1,"running_mate":false,"scrollable":false}},{"model":"campaign_trail.candidate","pk":1003,"fields":{"first_name":"Maya","last_name":"Wiley Campaign","election":20,"party":"Democratic","state":"Citywide","priority":1,"description":"<p><i>\"We have many big problems we need to address in this nation - saving our homes, finding jobs that support our families, plugging into new sources of energy. The way we solve them is to think, talk, debate and work to advance solutions.\"</i><br><br>There's a lot of things wrong with the city. Maya Wiley believes structural racism is one of them. And she's done a damn good job fighting it. She's got an impressive resum√© for someone like her.<br><br>Despite not being born a New Yorker, she still believes that this city can elect her as the Democratic nominee.","color_hex":"#532ab5","secondary_color_hex":null,"is_active":1,"image_url":"https://files.catbox.moe/ofzaht.jpg","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":null,"candidate_score":1,"running_mate":false,"scrollable":false}},{"model":"campaign_trail.candidate","pk":1004,"fields":{"first_name":"Andrew","last_name":"Yang Campaign","election":20,"party":"Democratic","state":"Citywide","priority":1,"description":"<p><i>\"Universal basic income is not a solution in search of a problem - it is the obvious solution that has been in front of us for years. It only requires us to have the vision, empathy and courage to adopt it for the American people before it is too late.\"</i><br><br>Andrew Yang ran for president before anything else. After failing to gain the Democratic nomination for president, he hopes to succeed in gaining the Democratic nomination once again - this time for mayor.<br><br>He's been made fun of & not taken seriously. But the polls say no. He's a technocrat, he hasn't compromised on his ideas, and he hopes to win this primary once and for all.","color_hex":"#2bc9cc","secondary_color_hex":null,"is_active":1,"image_url":"https://files.catbox.moe/g2ilkf.jpg","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":null,"candidate_score":1,"running_mate":false,"scrollable":false}},{"model":"campaign_trail.candidate","pk":1005,"fields":{"first_name":"Eric","last_name":"Adams","election":20,"party":"Democratic","state":"Brooklyn","priority":1,"description":"Eric Adams has been the Borough President of Brooklyn since 2014, before that he was a State Senator, before that he was an NYPD officer for two decades, and before that he was a poor little boy growing up in Brooklyn and Queens.<br><br>Growing up in the neighborhood of South Jamaica, Adams was a poor student, and a \"tough little guy\", who did favors for local hustlers and was a member of a gang. On one occasion, Adams and his brother were arrested for trespassing, while in custody, they were beaten by a group of officers until a black policeman showed up. The incident inspired Adams to join the force, seeking to reform police culture from within.<br><br>Politically, Adams can't quite be placed in a nice little box. He runs as a moderate, but has his share of a liberal governing history. All he knows is the people of New York City want to be safe, they want to have jobs, and they want their children to have a good education.","color_hex":"#0000ff","secondary_color_hex":null,"is_active":0,"image_url":"https://files.catbox.moe/upvdc7.jpg","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"<p>Eric Adams has been the Borough President of Brooklyn since 2014, before that he was a State Senator, before that he was an NYPD officer for two decades, and before that he was a poor little boy growing up in Brooklyn and Queens.<br><br>Growing up in the neighborhood of South Jamaica, Adams was a poor student, and a \"tough little guy\", who did favors for local hustlers and was a member of a gang. On one occasion, Adams and his brother were arrested for trespassing, while in custody, they were beaten by a group of officers until a black policeman showed up. The incident inspired Adams to join the force, seeking to reform police culture from within.<br><br>Politically, Adams can't quite be placed in a nice little box. He runs as a moderate, but has his share of a liberal governing history. All he knows is the people of New York City want to be safe, they want to have jobs, and they want their children to have a good education.","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"0"}},{"model":"campaign_trail.candidate","pk":1006,"fields":{"first_name":"Kathryn","last_name":"Garcia","election":20,"party":"Democratic","state":"Brooklyn","priority":1,"description":"Another native of Brooklyn, Kathryn Garcia grew up in Park Slope in a multiracial household with her adoptive parents and siblings.<br><br>Garcia began and spent most of her career in the Sanitation Department, rising all the way to Sanitation Commissioner. She has been responsible for the city's water supply, making sure New Yorkers had access to clean water in the aftermath of Hurricane Sandy. When she was made interim Chair of the Housing Authority, she lead the charge to make sure New York City homes were free from lead paint. During the peak of the COVID-19 pandemic, Garcia was named \"Food Czar\", where she made sure struggling people had something to eat.<br><br>Kathryn Garcia has cleaned up the streets of New York City, now, she seeks to clean up it's politics. If elected, she will become New York's first female mayor.","color_hex":"#0000ff","secondary_color_hex":null,"is_active":0,"image_url":"https://files.catbox.moe/wx085f.jpg","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"<p>Another native of Brooklyn, Kathryn Garcia grew up in Park Slope in a multiracial household with her adoptive parents and siblings.<br><br>Garcia began and spent most of her career in the Sanitation Department, rising all the way to Sanitation Commissioner. She has been responsible for the city's water supply, making sure New Yorkers had access to clean water in the aftermath of Hurricane Sandy. When she was made interim Chair of the Housing Authority, she lead the charge to make sure New York City homes were free from lead paint. During the peak of the COVID-19 pandemic, Garcia was named \"Food Czar\", where she made sure struggling people had something to eat.<br><br>Kathryn Garcia has cleaned up the streets of New York City, now, she seeks to clean up it's politics. If elected, she will become New York's first female mayor.","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"1"}},{"model":"campaign_trail.candidate","pk":1007,"fields":{"first_name":"Maya","last_name":"Wiley","election":20,"party":"Democratic","state":"Brooklyn","priority":1,"description":"Maya Wiley isn't a native of New York City, born in Syracuse and raised in Washington D.C., but she's been around for a while. She served in the District Attorney's office, she worked for the NAACP Legal Defense Fund and for the ACLU, both headquartered in New York. She worked at The New School. She worked at MSNBC.<br><br>Most notably, Wiley served as Counsel to outgoing Mayor Bill de Blasio, where she defended the Mayor from having discussions with lobbyists publicly disclosed. At the same time, she was President of a national policy group dedicated to fighting structural racism.<br><br>The former Civil Rights attorney finds herself a leading candidate in this primary, and a favorite of progressive groups and labor unions. If elected, she will become New York's first female Mayor.","color_hex":"#0000ff","secondary_color_hex":null,"is_active":0,"image_url":"https://files.catbox.moe/8dxk01.jpg","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"<p>Maya Wiley isn't a native of New York City, born in Syracuse and raised in Washington D.C., but she's been around for a while. She served in the District Attorney's office, she worked for the NAACP Legal Defense Fund and for the ACLU, both headquartered in New York. She worked at The New School. She worked at MSNBC.<br><br>Most notably, Wiley served as Counsel to outgoing Mayor Bill de Blasio, where she defended the Mayor from having discussions with lobbyists publicly disclosed. At the same time, she was President of a national policy group dedicated to fighting structural racism.<br><br>The former Civil Rights attorney finds herself a leading candidate in this primary, and a favorite of progressive groups and labor unions. If elected, she will become New York's first female Mayor.","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"2"}},{"model":"campaign_trail.candidate","pk":1008,"fields":{"first_name":"Andrew","last_name":"Yang","election":20,"party":"Democratic","state":"Manhattan","priority":1,"description":"Bursting onto the scene with a surprising Presidential campaign in 2020, Andrew Yang became the subject of speculation regarding his interest in this race almost immediately, though he took his time, being the final of the major candidates to declare for the race.<br><br>Donning a scarf, the technocrat and former corporate lawyer did enter the race after all. His policies remain relatively the same from his Presidential campaign, a moderate technocrat with a focus on getting money in the citizen's pockets.<br><br>Despite the late entry, Yang came into the race as the frontrunner, with double-digit leads over all his closest opponents, all he needs to do is play the race conservatively and he should win, but can he do that?","color_hex":"#0000ff","secondary_color_hex":null,"is_active":0,"image_url":"https://files.catbox.moe/chymd5.jpg","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"<p>Bursting onto the scene with a surprising Presidential campaign in 2020, Andrew Yang became the subject of speculation regarding his interest in this race almost immediately, though he took his time, being the final of the major candidates to declare for the race.<br><br>Donning a scarf, the technocrat and former corporate lawyer did enter the race after all. His policies remain relatively the same from his Presidential campaign, a moderate technocrat with a focus on getting money in the citizen's pockets.<br><br>Despite the late entry, Yang came into the race as the frontrunner, with double-digit leads over all his closest opponents, all he needs to do is play the race conservatively and he should win, but can he do that?","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"3"}}];e.running_mate_json = [{"model":"campaign_trail.running_mate","pk":2001,"fields":{"candidate":1001,"running_mate":1005}},{"model":"campaign_trail.running_mate","pk":2002,"fields":{"candidate":1002,"running_mate":1006}},{"model":"campaign_trail.running_mate","pk":2003,"fields":{"candidate":1003,"running_mate":1007}},{"model":"campaign_trail.running_mate","pk":2004,"fields":{"candidate":1004,"running_mate":1008}}];

styling = document.createElement("style");
document.head.appendChild(styling);

styling.innerHTML = `
#candidate_form h3 {
    visibility: hidden;
}

#candidate_form h3::before {
  content: "Please select your campaign:";
  position: absolute;
  top: 10px;
  left: 0;
  height: 100%;
  width: 100%;
  visibility: visible;
}

#candidate_id, #running_mate_id, .person_description_window, .person_button {
    z-index: 289;
    position:relative;
}

#running_mate_form h3 {
    visibility: hidden;
}

#running_mate_form h3::before {
  content: "Please select your candidate:";
  position: absolute;
  top: 10px;
  left: 0;
  height: 100%;
  width: 100%;
  visibility: visible;
}

#candidate_summary ul li:nth-child(2),
#candidate_summary ul li:nth-child(3), #running_mate_summary ul li:nth-child(2) {
    display: none;
}
`

let z = new MutationObserver((mutationsList, observer) => {
    let runningMateSummary = document.querySelector("#running_mate_summary");
    if (runningMateSummary && runningMateSummary.children[0].children[2].innerHTML != runningMateSummary.children[0].children[2].innerHTML.replaceAll("Home State", "Borough")) {
        runningMateSummary.children[0].children[2].innerHTML = runningMateSummary.children[0].children[2].innerHTML.replaceAll("Home State", "Borough");
    }
});

let style = document.createElement('style');
style.type = 'text/css';
style.id = 'dynamic-style';

style.innerHTML = `
  .campaign_trail_start_emphasis {
    background-color: #e38929;
  }
  a:-webkit-any-link {
    color: #000000;
  }
`;

document.head.appendChild(style);

next0 = function() {document.getElementById("screen0").style.display = "none";document.getElementById("screen1").style.display = "initial";}
back0 = function() {document.getElementById("screen0").style.display = "initial";document.getElementById("screen1").style.display = "none";}


RecReading=true

quotes = ["", ]
customquote = quotes[Math.floor((Math.random() * quotes.length))]
                                   
corrr=`\n<h2>THE NEW YORK CITY TRAIL</h2><font id='wittyquote' size='4' color='white'><em>`+customquote+`</em></font>`

campaignTrail_temp.modBoxTheme = {
  "header_color": "#eda137",
  "header_text_color": "#000000",
  "description_text_color": "#000000",
  "description_background_color": "#ffffff",
  "main_color": "#1644a8",
  "secondary_color": "#eda137",
 "ui_text_color": "#ffffff"
}

RecReading=true

  campaignTrail_temp.credits = "<button onclick='credits()'>u/Goosedukee</button>";
  
  credits = function() {
    credits = ["Credits", "u/Goosedukee - Writing & Original Concept", "C0SM0 - Writing & Coding", "DecstarG - Various different codes"]
    text = "CREDITS:\n\n"
    for (i in credits) {
        text += credits[i] + "\n"
    }
    alert(text)
  }

HistHexcolour=["#2c5ec9","#c23030","#532ab5","#2bc9cc"];
    HistName=[" Eric Adams"," Kathryn Garcia"," Maya Wiley"," Andrew Yang"];
    HistEV=[520,17,0,0];
    HistPV=["289,403 (First) - 404,513 (Second)","184,463 (First) - 397,316 (Second)","201,193 (First)","115,130 (First)"];
    HistPVP=["30.7% - 50.4%","19.6% - 49.6%","21.4%","12.2%"];

$("#music_player")[0].children[0].style.display="none"

$("#music_player")[0].children[1].style.display="none"


document.getElementById("modLoadReveal").style.display="none"

document.getElementById("modloaddiv").style.display="none"


musicBox = document.getElementById("music_player")

musicBox.style.display=""


var trackSel;

e = campaignTrail_temp

e.selectedSoundtrack = 0


toTime = (seconds) => {

  var date = new Date(null);

  date.setSeconds(seconds);

  return date.toISOString().substr(11, 8);

}


generateTime = () => {

    // Get the audio element

    var audio = document.getElementById("campaigntrailmusic");


    timeTracker = document.createElement("div");

    timeTracker.style = `

      text-align:left;

      border-style:solid;

      border-width:3px;

      height:150px;

      width:200px;

      background-color:#2960d6;

      float:right;

      padding: 10px;

    `

    $("#trackSelParent")[0].prepend(timeTracker);

    $("#trackSelParent")[0].prepend(document.createElement("br"));


    // Create a new element to display the current position of the audio

    var positionDisplay = document.createElement("gg");

    positionDisplay.id = "position-display";


    // Create a new slider element to change the time

    var timeSlider = document.createElement("input");

    timeSlider.type = "range";

    timeSlider.min = 0;

    timeSlider.max = 1;

    timeSlider.step = 0.001;

    timeSlider.value = 0;

    timeSlider.style.width = "200px";

    timeSlider.id = "time-slider";


    var pausePlay = document.createElement("button");

    pausePlay.id = "position-display";

    pausePlay.innerHTML = "<b>Pause</b>"

    pausePlay.style.width = "100%";



    pausePlay.addEventListener("click", event => {

      event.preventDefault();

      updatePositionDisplay();

      let audio = document.getElementById("campaigntrailmusic");

      if (audio.paused) {

        audio.play();

        event.target.innerHTML = "<b>Pause</b>";

        return;

      }

      audio.pause();

      event.target.innerHTML = "<b>Play</b>";

      return;

    })


    var volumeLabel = document.createElement("gg");

    volumeLabel.id = "volume-label";

    volumeLabel.innerHTML = "<br><b>Volume: </b>"


    var volumeSlider = document.createElement("input");

    volumeSlider.type = "range";

    volumeSlider.min = 0;

    volumeSlider.max = 1;

    volumeSlider.step = 0.001;

    volumeSlider.value = 0;

    volumeSlider.style.width = "200px";

    volumeSlider.id = "volume-slider";


    volumeSlider.value = audio.volume;


    timeTracker.appendChild(pausePlay);

    timeTracker.appendChild(document.createElement("br"));

    timeTracker.appendChild(document.createElement("br"));

    timeTracker.appendChild(positionDisplay);

    timeTracker.appendChild(timeSlider);

    timeTracker.appendChild(volumeLabel);

    timeTracker.appendChild(volumeSlider);


    updatePositionDisplay();


    //for (let i = 0; i < 10; i++)

    //timeTracker.append(document.createElement("br"));



    // Function to update the position display

    function updatePositionDisplay() {

      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";

      timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;

    }


    // Function to change the time of the audio

    function changeTime() {

      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";

      audio.currentTime = timeSlider.value * audio.duration;

    }


    updateVolume = event => {

      audio.volume = event.target.value;

    }

   

    // Update the position display and slider every second

    setInterval(updatePositionDisplay, 1000);


    // Listen for changes to the time slider and change the time of the audio

    timeSlider.addEventListener("input", changeTime);

    volumeSlider.addEventListener("input", updateVolume)

}


function newMusicPlayer() {

  trackSel = document.createElement("div");

  trackSel.id = "trackSelParent"

  let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#2960d6;float:right;">`

  z += `<b><select id='selectSoundtrack'><option value='`+soundtracks[e.selectedSoundtrack].name+`'>`+soundtracks[e.selectedSoundtrack].name+"</option>"

  for (i in soundtracks) {

    if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {

      z += `<option value='`+soundtracks[i].name+`'>`+soundtracks[i].name+`</option>`

    }

  }

  z += `</select></b><br><br>`

  // <label><input type="radio" name="option" value="option1">Option 1</label><br>

  for (i in soundtracks[e.selectedSoundtrack].tracklist) {

    let a = soundtracks[e.selectedSoundtrack].tracklist[i]

    let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="`+i+`">`+a.name+`</label><br>`

    z += b

  }

  z += "</div><br><br>"

  trackSel.innerHTML = z


  // select correct song


  musicBox.appendChild(trackSel);

  Array.from(document.getElementById("trackSel").children).filter(f=>{

    return f.tagName == "LABEL"

  }).map(f=>f.children[0])[0].checked = true


  // set soundtrack changer


  soundtrackSelector = document.getElementById("selectSoundtrack")

  soundtrackSelector.onchange = function() {

    for (i in soundtracks) {

      if (soundtracks[i].name == soundtrackSelector.value) {

        e.selectedSoundtrack = i

        break

      }

    }

    document.getElementById("trackSelParent").remove()

    newMusicPlayer()

  }


  var matches = document.querySelectorAll('.trackSelector');


  for (match in matches) {

    matches[match].onchange = function() {

      musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url

      musicBox.children[2].currentTime = 0

    }

  }


  musicBox.children[2].loop = false

  musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url


  musicBox.children[2].onended = function() {

    console.log("next track")

    let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);

    let newSel = clamp(selected+1, soundtracks[e.selectedSoundtrack].tracklist.length-1, 0)

    let buttons = Array.from(document.getElementById("trackSel").children).filter(f=>{

      return f.tagName == "LABEL"

    }).map(f=>f.children[0])

    //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)

    buttons[newSel].click()

  }


  for (w = 0; w < 7; w++) {

    document.getElementById("trackSelParent").appendChild(document.createElement("br"))

  }

 

  generateTime();

}


clamp = function(a, max, min, overflow=true) {

  if (overflow) {

    return a > max ? min : a < min ? max : a;

  }

  return a > max ? max : a < min ? min : a;

}


// Track list


var soundtracks = {

  0: {

    name: "New York City Hits",

    tracklist: [

      {

        name: "New York, New York (Frank Sinatra)",

        url: "https://file.garden/ZRcfmLUQNGkxIJds/Theme%20From%20New%20York%2C%20New%20York%20(2008%20Remastered).mp3",

      },

      {

        name: "N.Y State Of Mind (Nas)",

        url: "https://file.garden/ZRcfmLUQNGkxIJds/Nas%20-%20N.Y.%20State%20of%20Mind%20(Official%20Audio).mp3",

      },

      {

        name: "Empire State Of Mind (Jay-Z & Alicia Keys)",

        url: "https://file.garden/ZRcfmLUQNGkxIJds/JAY-Z%20-%20Empire%20State%20Of%20Mind%20(Feat.%20Alicia%20Keys)%20(Official%20Audio).mp3",

      },

      {

        name: "New York State Of Mind (Billy Joel)",

        url: "https://files.catbox.moe/iqzbtq.mp3",

      },

      {

        name: "New York (Ed Sheeran)",

        url: "https://files.catbox.moe/zd06hl.mp3",

      },

      {

        name: "New York City (Lenny Kravitz)",

        url: "https://files.catbox.moe/uc7w2j.mp3",
      

      },

    ],

  },

}



newMusicPlayer()
